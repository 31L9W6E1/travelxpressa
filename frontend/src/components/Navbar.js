import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { Link } from "react-router-dom";
import { useAuth } from "../contexts/AuthContext";
import { useTheme } from "../contexts/ThemeContext";
import { Menu, X, Plane, User, LogOut, Settings, FileText, CreditCard, ChevronDown, Sun, Moon } from "lucide-react";
import { useState, useRef, useEffect } from "react";
const Navbar = () => {
    const { user, logout } = useAuth();
    const { theme, toggleTheme } = useTheme();
    const [isMenuOpen, setIsMenuOpen] = useState(false);
    const [isDropdownOpen, setIsDropdownOpen] = useState(false);
    const dropdownRef = useRef(null);
    // Close dropdown when clicking outside
    useEffect(() => {
        const handleClickOutside = (event) => {
            if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
                setIsDropdownOpen(false);
            }
        };
        document.addEventListener("mousedown", handleClickOutside);
        return () => document.removeEventListener("mousedown", handleClickOutside);
    }, []);
    return (_jsx("nav", { className: "fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b border-border theme-transition", children: _jsxs("div", { className: "max-w-7xl mx-auto px-4 sm:px-6", children: [_jsxs("div", { className: "flex justify-between items-center h-16", children: [_jsxs("div", { className: "flex items-center space-x-8", children: [_jsxs(Link, { to: "/", className: "flex items-center space-x-2", children: [_jsx(Plane, { className: "w-7 h-7 text-foreground" }), _jsx("span", { className: "text-xl font-bold text-foreground tracking-tight", children: "TravelXpressa" })] }), _jsxs("div", { className: "hidden md:flex items-center space-x-1", children: [_jsx(Link, { to: "/about", className: "px-4 py-2 text-muted-foreground hover:text-foreground transition-colors", children: "About" }), _jsx(Link, { to: "/learn-more", className: "px-4 py-2 text-muted-foreground hover:text-foreground transition-colors", children: "Learn More" }), user && (_jsxs(Link, { to: "/application", className: "px-4 py-2 text-muted-foreground hover:text-foreground transition-colors flex items-center gap-2", children: [_jsx(FileText, { className: "w-4 h-4" }), "Apply"] })), user?.role === "ADMIN" && (_jsxs(Link, { to: "/admin", className: "px-4 py-2 text-muted-foreground hover:text-foreground transition-colors flex items-center gap-2", children: [_jsx(Settings, { className: "w-4 h-4" }), "Admin"] }))] })] }), _jsxs("div", { className: "hidden md:flex items-center space-x-4", children: [_jsx("button", { onClick: toggleTheme, className: "p-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors", "aria-label": `Switch to ${theme === 'dark' ? 'light' : 'dark'} mode`, title: `Switch to ${theme === 'dark' ? 'light' : 'dark'} mode`, children: theme === 'dark' ? (_jsx(Sun, { className: "w-5 h-5" })) : (_jsx(Moon, { className: "w-5 h-5" })) }), user ? (_jsxs("div", { className: "relative", ref: dropdownRef, children: [_jsxs("button", { onClick: () => setIsDropdownOpen(!isDropdownOpen), className: "flex items-center space-x-2 px-3 py-2 text-foreground hover:bg-secondary rounded-lg transition-colors", children: [_jsx("div", { className: "w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-semibold text-sm", children: user.name?.[0]?.toUpperCase() || user.email?.[0]?.toUpperCase() }), _jsx("span", { className: "text-sm font-medium", children: user.name || user.email?.split('@')[0] }), user.role === "ADMIN" && (_jsx("span", { className: "px-2 py-0.5 text-xs bg-secondary text-secondary-foreground rounded", children: "Admin" })), _jsx(ChevronDown, { className: `w-4 h-4 transition-transform ${isDropdownOpen ? 'rotate-180' : ''}` })] }), isDropdownOpen && (_jsxs("div", { className: "absolute right-0 mt-2 w-56 bg-card border border-border rounded-lg shadow-xl overflow-hidden", children: [_jsxs("div", { className: "px-4 py-3 border-b border-border", children: [_jsx("p", { className: "text-sm text-card-foreground font-medium", children: user.name }), _jsx("p", { className: "text-xs text-muted-foreground", children: user.email })] }), _jsxs("div", { className: "py-1", children: [_jsxs(Link, { to: "/profile", onClick: () => setIsDropdownOpen(false), className: "flex items-center gap-3 px-4 py-2.5 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors", children: [_jsx(User, { className: "w-4 h-4" }), "Profile"] }), _jsxs(Link, { to: "/profile", onClick: () => setIsDropdownOpen(false), className: "flex items-center gap-3 px-4 py-2.5 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors", children: [_jsx(FileText, { className: "w-4 h-4" }), "Applications"] }), _jsxs(Link, { to: "/profile", onClick: () => setIsDropdownOpen(false), className: "flex items-center gap-3 px-4 py-2.5 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors", children: [_jsx(CreditCard, { className: "w-4 h-4" }), "Payments"] })] }), _jsx("div", { className: "border-t border-border py-1", children: _jsxs("button", { onClick: () => {
                                                            logout();
                                                            setIsDropdownOpen(false);
                                                        }, className: "flex items-center gap-3 w-full px-4 py-2.5 text-destructive hover:bg-secondary transition-colors", children: [_jsx(LogOut, { className: "w-4 h-4" }), "Logout"] }) })] }))] })) : (_jsxs("div", { className: "flex items-center space-x-3", children: [_jsx(Link, { to: "/login", className: "px-4 py-2 text-muted-foreground hover:text-foreground transition-colors", children: "Sign In" }), _jsx(Link, { to: "/login", className: "px-5 py-2 bg-primary text-primary-foreground rounded-lg font-medium hover:opacity-90 transition-opacity", children: "Get Started" })] }))] }), _jsxs("div", { className: "md:hidden flex items-center space-x-2", children: [_jsx("button", { onClick: toggleTheme, className: "p-2 text-foreground hover:bg-secondary rounded-lg transition-colors", "aria-label": `Switch to ${theme === 'dark' ? 'light' : 'dark'} mode`, children: theme === 'dark' ? (_jsx(Sun, { className: "w-5 h-5" })) : (_jsx(Moon, { className: "w-5 h-5" })) }), _jsx("button", { className: "p-2 text-foreground hover:bg-secondary rounded-lg", onClick: () => setIsMenuOpen(!isMenuOpen), children: isMenuOpen ? _jsx(X, { className: "w-6 h-6" }) : _jsx(Menu, { className: "w-6 h-6" }) })] })] }), isMenuOpen && (_jsx("div", { className: "md:hidden py-4 bg-background border-t border-border", children: _jsxs("div", { className: "flex flex-col space-y-1", children: [_jsx(Link, { to: "/about", className: "px-4 py-3 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors", onClick: () => setIsMenuOpen(false), children: "About" }), _jsx(Link, { to: "/learn-more", className: "px-4 py-3 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors", onClick: () => setIsMenuOpen(false), children: "Learn More" }), user && (_jsxs(_Fragment, { children: [_jsx(Link, { to: "/profile", className: "px-4 py-3 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors", onClick: () => setIsMenuOpen(false), children: "Profile" }), _jsx(Link, { to: "/application", className: "px-4 py-3 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors", onClick: () => setIsMenuOpen(false), children: "Apply Now" })] })), user?.role === "ADMIN" && (_jsx(Link, { to: "/admin", className: "px-4 py-3 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors", onClick: () => setIsMenuOpen(false), children: "Admin Panel" })), _jsx("div", { className: "border-t border-border pt-4 mt-2", children: user ? (_jsxs("div", { className: "space-y-2", children: [_jsxs("div", { className: "px-4 py-2 text-muted-foreground text-sm", children: ["Signed in as ", user.name] }), _jsx("button", { onClick: () => {
                                                logout();
                                                setIsMenuOpen(false);
                                            }, className: "w-full px-4 py-3 text-destructive hover:bg-secondary transition-colors text-left", children: "Logout" })] })) : (_jsxs("div", { className: "space-y-2 px-4", children: [_jsx(Link, { to: "/login", className: "block py-3 text-muted-foreground hover:text-foreground transition-colors", onClick: () => setIsMenuOpen(false), children: "Sign In" }), _jsx(Link, { to: "/login", className: "block py-3 bg-primary text-primary-foreground rounded-lg font-medium text-center", onClick: () => setIsMenuOpen(false), children: "Get Started" })] })) })] }) }))] }) }));
};
export default Navbar;
