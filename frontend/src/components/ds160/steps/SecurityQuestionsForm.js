import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { ChevronRight, ChevronLeft, AlertTriangle, Shield } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { Label } from '@/components/ui/label';
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';
import { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';
import { Textarea } from '@/components/ui/textarea';
import { Alert, AlertDescription } from '@/components/ui/alert';
function YesNoQuestion({ question, description, value, onChange, showDetails = false, detailsValue, onDetailsChange, detailsPlaceholder = 'Please provide details...' }) {
    return (_jsxs("div", { className: "p-4 border rounded-lg space-y-3", children: [_jsxs("div", { className: "space-y-1", children: [_jsx("p", { className: "font-medium text-sm", children: question }), description && _jsx("p", { className: "text-xs text-muted-foreground", children: description })] }), _jsxs(RadioGroup, { value: value === undefined ? undefined : value ? 'yes' : 'no', onValueChange: (v) => onChange(v === 'yes'), className: "flex gap-4", children: [_jsxs("div", { className: "flex items-center space-x-2", children: [_jsx(RadioGroupItem, { value: "no", id: `${question}-no` }), _jsx(Label, { htmlFor: `${question}-no`, className: "font-normal", children: "No" })] }), _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx(RadioGroupItem, { value: "yes", id: `${question}-yes` }), _jsx(Label, { htmlFor: `${question}-yes`, className: "font-normal", children: "Yes" })] })] }), showDetails && value && onDetailsChange && (_jsx(Textarea, { value: detailsValue || '', onChange: (e) => onDetailsChange(e.target.value), placeholder: detailsPlaceholder, rows: 2, className: "mt-2" }))] }));
}
export default function SecurityQuestionsForm({ data, onSave, onNext, onPrev }) {
    const [isSaving, setIsSaving] = useState(false);
    const [formData, setFormData] = useState({
        hasCommunicableDisease: data?.hasCommunicableDisease ?? false,
        hasMentalOrPhysicalDisorder: data?.hasMentalOrPhysicalDisorder ?? false,
        isDrugAbuser: data?.isDrugAbuser ?? false,
        hasBeenArrested: data?.hasBeenArrested ?? false,
        arrestDetails: data?.arrestDetails || '',
        hasViolatedControlledSubstancesLaw: data?.hasViolatedControlledSubstancesLaw ?? false,
        isEngagedInProstitution: data?.isEngagedInProstitution ?? false,
        isInvolvedInMoneyLaundering: data?.isInvolvedInMoneyLaundering ?? false,
        hasCommittedHumanTrafficking: data?.hasCommittedHumanTrafficking ?? false,
        hasBenefitedFromTrafficking: data?.hasBenefitedFromTrafficking ?? false,
        hasAidedHumanTrafficking: data?.hasAidedHumanTrafficking ?? false,
        seeksEspionage: data?.seeksEspionage ?? false,
        seeksToEngageInTerrorism: data?.seeksToEngageInTerrorism ?? false,
        hasProvidedTerroristSupport: data?.hasProvidedTerroristSupport ?? false,
        isTerroristOrganizationMember: data?.isTerroristOrganizationMember ?? false,
        isRelatedToTerrorist: data?.isRelatedToTerrorist ?? false,
        hasParticipatedInGenocide: data?.hasParticipatedInGenocide ?? false,
        hasParticipatedInTorture: data?.hasParticipatedInTorture ?? false,
        hasParticipatedInExtrajudicialKillings: data?.hasParticipatedInExtrajudicialKillings ?? false,
        hasRecruitedChildSoldiers: data?.hasRecruitedChildSoldiers ?? false,
        hasViolatedReligiousFreedom: data?.hasViolatedReligiousFreedom ?? false,
        hasEnforcedPopulationControls: data?.hasEnforcedPopulationControls ?? false,
        hasInvolvedInOrganTrafficking: data?.hasInvolvedInOrganTrafficking ?? false,
        hasSoughtVisaByFraud: data?.hasSoughtVisaByFraud ?? false,
        hasBeenRemovedOrDeported: data?.hasBeenRemovedOrDeported ?? false,
        hasWithheldCustodyOfUSCitizen: data?.hasWithheldCustodyOfUSCitizen ?? false,
        hasVotedInUSIllegally: data?.hasVotedInUSIllegally ?? false,
        hasRenouncedUSCitizenshipToAvoidTax: data?.hasRenouncedUSCitizenshipToAvoidTax ?? false,
        hasBeenInUS: data?.hasBeenInUS ?? false,
        usVisitDetails: data?.usVisitDetails || '',
        hasBeenIssuedUSVisa: data?.hasBeenIssuedUSVisa ?? false,
        lastVisaDetails: data?.lastVisaDetails || '',
        hasBeenRefusedUSVisa: data?.hasBeenRefusedUSVisa ?? false,
        refusalDetails: data?.refusalDetails || '',
        hasImmigrantPetitionFiled: data?.hasImmigrantPetitionFiled ?? false,
        petitionDetails: data?.petitionDetails || '',
    });
    const handleSubmit = async (e) => {
        e.preventDefault();
        setIsSaving(true);
        try {
            await onSave(formData);
            onNext();
        }
        finally {
            setIsSaving(false);
        }
    };
    const handleChange = (field, value) => {
        setFormData(prev => ({ ...prev, [field]: value }));
    };
    return (_jsxs("form", { onSubmit: handleSubmit, className: "space-y-8", children: [_jsxs(Alert, { children: [_jsx(AlertTriangle, { className: "h-4 w-4" }), _jsxs(AlertDescription, { children: [_jsx("strong", { children: "Important:" }), " Answer all questions truthfully. Providing false information may result in permanent refusal of a visa or denial of entry into the United States. All declarations are made under penalty of perjury."] })] }), _jsxs(Card, { children: [_jsxs(CardHeader, { children: [_jsx(CardTitle, { className: "text-lg", children: "Previous U.S. Travel" }), _jsx(CardDescription, { children: "Information about your previous travel to the United States" })] }), _jsxs(CardContent, { className: "space-y-4", children: [_jsx(YesNoQuestion, { question: "Have you ever been in the U.S.?", value: formData.hasBeenInUS, onChange: (v) => handleChange('hasBeenInUS', v), showDetails: formData.hasBeenInUS, detailsValue: formData.usVisitDetails, onDetailsChange: (v) => handleChange('usVisitDetails', v), detailsPlaceholder: "Provide dates and purpose of visit..." }), _jsx(YesNoQuestion, { question: "Have you ever been issued a U.S. visa?", value: formData.hasBeenIssuedUSVisa, onChange: (v) => handleChange('hasBeenIssuedUSVisa', v), showDetails: formData.hasBeenIssuedUSVisa, detailsValue: formData.lastVisaDetails, onDetailsChange: (v) => handleChange('lastVisaDetails', v), detailsPlaceholder: "Provide visa type, issuance date, and visa number if known..." }), _jsx(YesNoQuestion, { question: "Have you ever been refused a U.S. Visa, or been refused admission to the United States, or withdrawn your application for admission at the port of entry?", value: formData.hasBeenRefusedUSVisa, onChange: (v) => handleChange('hasBeenRefusedUSVisa', v), showDetails: formData.hasBeenRefusedUSVisa, detailsValue: formData.refusalDetails, onDetailsChange: (v) => handleChange('refusalDetails', v), detailsPlaceholder: "Provide details about the refusal..." }), _jsx(YesNoQuestion, { question: "Has anyone ever filed an immigrant petition on your behalf with the United States Citizenship and Immigration Services?", value: formData.hasImmigrantPetitionFiled, onChange: (v) => handleChange('hasImmigrantPetitionFiled', v), showDetails: formData.hasImmigrantPetitionFiled, detailsValue: formData.petitionDetails, onDetailsChange: (v) => handleChange('petitionDetails', v), detailsPlaceholder: "Provide details about the petition..." })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { children: _jsxs(CardTitle, { className: "text-lg flex items-center gap-2", children: [_jsx(Shield, { className: "w-5 h-5" }), "Health & Medical"] }) }), _jsxs(CardContent, { className: "space-y-4", children: [_jsx(YesNoQuestion, { question: "Do you have a communicable disease of public health significance?", description: "Communicable diseases of public significance include chancroid, gonorrhea, granuloma inguinale, infectious leprosy, lymphogranuloma venereum, infectious stage syphilis, active tuberculosis, and others as determined by the Department of Health and Human Services.", value: formData.hasCommunicableDisease, onChange: (v) => handleChange('hasCommunicableDisease', v) }), _jsx(YesNoQuestion, { question: "Do you have a mental or physical disorder that poses or is likely to pose a threat to the safety or welfare of yourself or others?", value: formData.hasMentalOrPhysicalDisorder, onChange: (v) => handleChange('hasMentalOrPhysicalDisorder', v) }), _jsx(YesNoQuestion, { question: "Are you or have you ever been a drug abuser or addict?", value: formData.isDrugAbuser, onChange: (v) => handleChange('isDrugAbuser', v) })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { className: "text-lg", children: "Criminal History" }) }), _jsxs(CardContent, { className: "space-y-4", children: [_jsx(YesNoQuestion, { question: "Have you ever been arrested or convicted for any offense or crime, even though subject of a pardon, amnesty, or other similar action?", value: formData.hasBeenArrested, onChange: (v) => handleChange('hasBeenArrested', v), showDetails: formData.hasBeenArrested, detailsValue: formData.arrestDetails, onDetailsChange: (v) => handleChange('arrestDetails', v) }), _jsx(YesNoQuestion, { question: "Have you ever violated, or engaged in a conspiracy to violate, any law relating to controlled substances?", value: formData.hasViolatedControlledSubstancesLaw, onChange: (v) => handleChange('hasViolatedControlledSubstancesLaw', v) }), _jsx(YesNoQuestion, { question: "Are you coming to the United States to engage in prostitution or unlawful commercialized vice or have you been engaged in prostitution or procuring prostitutes within the past 10 years?", value: formData.isEngagedInProstitution, onChange: (v) => handleChange('isEngagedInProstitution', v) }), _jsx(YesNoQuestion, { question: "Have you ever been involved in, or do you seek to engage in, money laundering?", value: formData.isInvolvedInMoneyLaundering, onChange: (v) => handleChange('isInvolvedInMoneyLaundering', v) })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { className: "text-lg", children: "Human Trafficking" }) }), _jsxs(CardContent, { className: "space-y-4", children: [_jsx(YesNoQuestion, { question: "Have you ever committed or conspired to commit a human trafficking offense in the United States or outside the United States?", value: formData.hasCommittedHumanTrafficking, onChange: (v) => handleChange('hasCommittedHumanTrafficking', v) }), _jsx(YesNoQuestion, { question: "Are you the spouse, son, or daughter of an individual who has committed or conspired to commit a human trafficking offense in the United States or outside the United States and have you within the last five years, knowingly benefited from the trafficking activities?", value: formData.hasBenefitedFromTrafficking, onChange: (v) => handleChange('hasBenefitedFromTrafficking', v) }), _jsx(YesNoQuestion, { question: "Have you knowingly aided, abetted, assisted or colluded with an individual who has committed or conspired to commit a severe human trafficking offense in the United States or outside the United States?", value: formData.hasAidedHumanTrafficking, onChange: (v) => handleChange('hasAidedHumanTrafficking', v) })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { className: "text-lg", children: "Security & Terrorism" }) }), _jsxs(CardContent, { className: "space-y-4", children: [_jsx(YesNoQuestion, { question: "Do you seek to engage in espionage, sabotage, export control violations, or any other illegal activity while in the United States?", value: formData.seeksEspionage, onChange: (v) => handleChange('seeksEspionage', v) }), _jsx(YesNoQuestion, { question: "Do you seek to engage in terrorist activities while in the United States or have you ever engaged in terrorist activities?", value: formData.seeksToEngageInTerrorism, onChange: (v) => handleChange('seeksToEngageInTerrorism', v) }), _jsx(YesNoQuestion, { question: "Have you ever or do you intend to provide financial assistance or other support to terrorists or terrorist organizations?", value: formData.hasProvidedTerroristSupport, onChange: (v) => handleChange('hasProvidedTerroristSupport', v) }), _jsx(YesNoQuestion, { question: "Are you a member or representative of a terrorist organization?", value: formData.isTerroristOrganizationMember, onChange: (v) => handleChange('isTerroristOrganizationMember', v) }), _jsx(YesNoQuestion, { question: "Are you the spouse, son, or daughter of an individual who has engaged in terrorist activity, including providing financial assistance or other support to terrorists or terrorist organizations, in the last five years?", value: formData.isRelatedToTerrorist, onChange: (v) => handleChange('isRelatedToTerrorist', v) })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { className: "text-lg", children: "Serious Crimes Against Humanity" }) }), _jsxs(CardContent, { className: "space-y-4", children: [_jsx(YesNoQuestion, { question: "Have you ever ordered, incited, committed, assisted, or otherwise participated in genocide?", value: formData.hasParticipatedInGenocide, onChange: (v) => handleChange('hasParticipatedInGenocide', v) }), _jsx(YesNoQuestion, { question: "Have you ever committed, ordered, incited, assisted, or otherwise participated in torture?", value: formData.hasParticipatedInTorture, onChange: (v) => handleChange('hasParticipatedInTorture', v) }), _jsx(YesNoQuestion, { question: "Have you committed, ordered, incited, assisted, or otherwise participated in extrajudicial killings, political killings, or other acts of violence?", value: formData.hasParticipatedInExtrajudicialKillings, onChange: (v) => handleChange('hasParticipatedInExtrajudicialKillings', v) }), _jsx(YesNoQuestion, { question: "Have you ever engaged in the recruitment or the use of child soldiers?", value: formData.hasRecruitedChildSoldiers, onChange: (v) => handleChange('hasRecruitedChildSoldiers', v) })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { className: "text-lg", children: "Other Questions" }) }), _jsxs(CardContent, { className: "space-y-4", children: [_jsx(YesNoQuestion, { question: "Have you, while serving as a government official, been responsible for or directly carried out, at any time, particularly severe violations of religious freedom?", value: formData.hasViolatedReligiousFreedom, onChange: (v) => handleChange('hasViolatedReligiousFreedom', v) }), _jsx(YesNoQuestion, { question: "Have you ever been directly involved in the establishment or enforcement of population controls forcing a woman to undergo an abortion against her free choice or a man or a woman to undergo sterilization against his or her free will?", value: formData.hasEnforcedPopulationControls, onChange: (v) => handleChange('hasEnforcedPopulationControls', v) }), _jsx(YesNoQuestion, { question: "Have you ever been directly involved in the coercive transplantation of human organs or bodily tissue?", value: formData.hasInvolvedInOrganTrafficking, onChange: (v) => handleChange('hasInvolvedInOrganTrafficking', v) }), _jsx(YesNoQuestion, { question: "Have you ever sought to obtain or assist others to obtain a visa, entry into the United States, or any other United States immigration benefit by fraud or willful misrepresentation or other unlawful means?", value: formData.hasSoughtVisaByFraud, onChange: (v) => handleChange('hasSoughtVisaByFraud', v) }), _jsx(YesNoQuestion, { question: "Have you ever been removed or deported from any country?", value: formData.hasBeenRemovedOrDeported, onChange: (v) => handleChange('hasBeenRemovedOrDeported', v) }), _jsx(YesNoQuestion, { question: "Have you ever withheld custody of a U.S. citizen child outside the United States from a person granted legal custody by a U.S. court?", value: formData.hasWithheldCustodyOfUSCitizen, onChange: (v) => handleChange('hasWithheldCustodyOfUSCitizen', v) }), _jsx(YesNoQuestion, { question: "Have you voted in the United States in violation of any law or regulation?", value: formData.hasVotedInUSIllegally, onChange: (v) => handleChange('hasVotedInUSIllegally', v) }), _jsx(YesNoQuestion, { question: "Have you ever renounced United States citizenship for the purpose of avoiding taxation?", value: formData.hasRenouncedUSCitizenshipToAvoidTax, onChange: (v) => handleChange('hasRenouncedUSCitizenshipToAvoidTax', v) })] })] }), _jsxs("div", { className: "flex justify-between pt-4 border-t", children: [_jsxs(Button, { type: "button", variant: "outline", onClick: onPrev, children: [_jsx(ChevronLeft, { className: "w-4 h-4 mr-2" }), "Previous"] }), _jsxs(Button, { type: "submit", disabled: isSaving, children: ["Save & Continue", _jsx(ChevronRight, { className: "w-4 h-4 ml-2" })] })] })] }));
}
